<script>
  const urlAPI = "TON_URL_APPS_SCRIPT_ICI"; // Remplace par l'URL fournie par Google Apps Script

  fetch(urlAPI)
    .then(response => response.json())
    .then(data => {
      const container = document.getElementById('temoignages-list');
      container.innerHTML = ""; // Vide la liste avant affichage
      data.forEach(item => {
        const div = document.createElement('div');
        div.classList.add('temoignage');
        div.innerHTML = `
          <p>"${item.testimony}"</p>
          <p class="temoin-nom">- ${item.name}</p>
        `;
        container.appendChild(div);
      });
    })
    .catch(() => {
      document.getElementById('temoignages-list').textContent = "Impossible de charger les témoignages.";
    });

  // Garde la gestion du formulaire telle quelle
  const form = document.getElementById('temoignage-form');
  form.addEventListener('submit', function(e){
    e.preventDefault();
    fetch(form.action, {
      method: form.method,
      body: new FormData(form),
      headers: { 'Accept': 'application/json' }
    }).then(response => {
      if (response.ok) {
        document.getElementById('form-message').style.display = 'block';
        form.reset();
      } else {
        alert('Une erreur est survenue, merci de réessayer.');
      }
    }).catch(() => {
      alert('Une erreur est survenue, merci de réessayer.');
    });
  });
</script>
